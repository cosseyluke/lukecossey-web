(this["webpackJsonplukecossey-web"]=this["webpackJsonplukecossey-web"]||[]).push([[0],{384:function(e,t,a){e.exports=a(535)},389:function(e,t,a){},391:function(e,t,a){},519:function(e,t,a){},534:function(e,t,a){},535:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),l=a.n(c),o=(a(389),a(390),a(18)),s=a(17),i=(a(391),a(65)),u=a(620),m=a(619),d=a(339),E="".concat("https://api.lukecossey.com","/authenticate"),p={login:function(e){var t=e.username,a=e.password,n=new Request("".concat(E),{method:"POST",body:JSON.stringify({email:t,password:a}),credentials:"include",headers:new Headers({"Content-Type":"application/json"})});return fetch(n).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return localStorage.setItem("auth",!0),e.body})).catch((function(){throw new Error("Network error")}))},logout:function(){return localStorage.removeItem("auth"),Promise.resolve()},checkError:function(e){var t=e.status;return 401===t||403===t?(localStorage.removeItem("auth"),Promise.reject()):Promise.resolve()},checkAuth:function(){return localStorage.getItem("auth")?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.reject("Unknown method")},getIdentity:function(){try{var e=JSON.parse(localStorage.getItem("auth")),t=e.first_name,a=e.last_name;return Promise.resolve({first_name:t,last_name:a})}catch(n){return Promise.reject(n)}}},b=a(627),h=a(624),f=a(603),v=a(318),j=a(628),k=a(630),O=a(625),g=a(623),w=a(622),y=a(609),_=(a(610),a(634),a(123)),N=a(304),P=function(e){var t=Object(N.parse)(e.location.search).post_id,a=t||"",r=a?"/posts/".concat(a,"/show"):"show";return n.createElement(b.a,e,n.createElement(h.a,{defaultValue:{post_id:a},redirect:r},n.createElement(f.a,{source:"sort_order",validate:Object(v.b)()}),n.createElement(_.a,{source:"body",validate:Object(v.b)()}),n.createElement(j.a,{label:"Post",source:"post_id",reference:"posts"},n.createElement(k.a,{optionText:"title"}))))},I=function(e){return n.createElement(O.a,Object.assign({},e,{redirect:"show"}),n.createElement(h.a,null,n.createElement(f.a,{source:"sort_order",validate:Object(v.b)()}),n.createElement(_.a,{source:"body",validate:Object(v.b)()}),n.createElement(j.a,{label:"Post",source:"post_id",reference:"posts"},n.createElement(k.a,{optionText:"title"}))))},S=a(611),C=a(333),A=a(635),M=a(612),x=a(617),H=a(613),J=a(335),T=a.n(J),U=a(24),B=a(332),L=a(614),D=a(615),W=a(626),q=a(616),z={field:"sort_order",order:"ASC"},F=function(e){var t=e.record;return n.createElement("span",null,"Post ",t?'"'.concat(t.title,'"'):"")},G=function(e){return n.createElement(b.a,Object.assign({title:n.createElement(F,null)},e),n.createElement(h.a,null,n.createElement(S.a,{label:"Publication date",source:"pub_date",validate:Object(v.b)()}),n.createElement(C.a,{source:"title",validate:Object(v.b)()}),n.createElement(C.a,{source:"slug",validate:Object(v.b)()}),n.createElement(_.a,{source:"intro",validate:Object(v.b)()})))},R=function(e){return n.createElement(O.a,Object.assign({title:n.createElement(F,null)},e),n.createElement(h.a,null,n.createElement(C.a,{disabled:!0,label:"Id",source:"id"}),n.createElement(S.a,{label:"Publication date",source:"pub_date",validate:Object(v.b)()}),n.createElement(C.a,{source:"title",validate:Object(v.b)()}),n.createElement(C.a,{source:"slug",validate:Object(v.b)()}),n.createElement(_.a,{source:"intro",validate:Object(v.b)()}),n.createElement(A.a,{label:"Blocks",reference:"blocks",target:"post_id",sort:z},n.createElement(w.a,null,n.createElement(y.a,{disabled:!0,label:"Id",source:"id"}),n.createElement(y.a,{source:"sort_order"}),n.createElement(y.a,{source:"body"}),n.createElement(M.a,null)))))},V=function(e){var t=e.record;return t?n.createElement(U.a,{component:B.a,to:{pathname:"/blocks/create",search:"?post_id=".concat(t.id)},label:"Add a block"},n.createElement(T.a,null)):n.createElement("div",null,"Emp")},$=function(e){var t=e.basePath,a=e.data;return n.createElement(H.a,null,n.createElement(L.a,{basePath:t}),n.createElement(D.a,null),n.createElement(V,{record:a}))},K=function(e){return n.createElement(W.a,Object.assign({},e,{actions:n.createElement($,null)}),n.createElement(q.a,null,n.createElement(y.a,{source:"title"}),n.createElement(x.a,{source:"pub_date"}),n.createElement(A.a,{label:"Blocks",reference:"blocks",target:"post_id",sort:z},n.createElement(w.a,null,n.createElement(y.a,{disabled:!0,label:"Id",source:"id"}),n.createElement(y.a,{source:"sort_order"}),n.createElement(y.a,{source:"body"}),n.createElement(M.a,null)))))},Q=function(e){return n.createElement(g.a,e,n.createElement(w.a,{rowClick:"edit"},n.createElement(y.a,{source:"title"}),n.createElement(x.a,{source:"pub_date"})))},X=a(618),Y=function(e){var t=e.record;return n.createElement("span",null,"User ",t?'"'.concat(t.email,'"'):"")},Z=function(e){return n.createElement(b.a,Object.assign({title:n.createElement(Y,null)},e),n.createElement(h.a,null,n.createElement(C.a,{label:"Email Address",source:"email",type:"email",validate:Object(v.b)()}),n.createElement(X.a,{label:"Password",source:"password",validate:Object(v.b)()}),n.createElement(C.a,{source:"first_name"}),n.createElement(C.a,{source:"last_name"})))},ee=function(e){return n.createElement(O.a,Object.assign({title:n.createElement(Y,null)},e),n.createElement(h.a,null,n.createElement(C.a,{disabled:!0,label:"Id",source:"id"}),n.createElement(S.a,{disabled:!0,label:"Created",source:"created"}),n.createElement(C.a,{label:"Email Address",source:"email",type:"email",validate:Object(v.b)()}),n.createElement(C.a,{source:"first_name"}),n.createElement(C.a,{source:"last_name"})))},te=function(e){return n.createElement(W.a,e,n.createElement(q.a,null,n.createElement(y.a,{source:"email"}),n.createElement(y.a,{source:"first_name"}),n.createElement(y.a,{source:"last_name"}),n.createElement(x.a,{source:"created"})))},ae=function(e){return n.createElement(g.a,e,n.createElement(w.a,{rowClick:"edit"},n.createElement(y.a,{source:"email"}),n.createElement(y.a,{source:"first_name"}),n.createElement(y.a,{source:"last_name"}),n.createElement(x.a,{source:"created"})))},ne=Object(d.a)("https://api.lukecossey.com",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.headers||(t.headers=new Headers({Accept:"application/json"})),t.credentials="include",i.a.fetchJson(e,t)})),re=function(){return n.createElement(u.a,{dataProvider:ne,authProvider:p},n.createElement(m.a,{name:"posts",list:Q,edit:R,create:G,show:K}),n.createElement(m.a,{name:"users",list:ae,edit:ee,create:Z,show:te}),n.createElement(m.a,{name:"blocks",edit:I,create:P}))},ce=a(80),le=a(81),oe=a(83),se=a(82),ie=a(351),ue=a.n(ie),me=(a(519),n.Component,a(232)),de=a.n(me),Ee=a(233),pe=a(621),be=a(234),he=a.n(be),fe=(a(534),"https://api.lukecossey.com"),ve=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={objUrl:"/log/".concat(n.props.post.slug)},n}return Object(le.a)(a,[{key:"getUrl",value:function(){return"/log/".concat(this.props.post.slug)}},{key:"render",value:function(){var e=Object(pe.a)(he()(this.props.post.pub_date),"MMMM d, y");return r.a.createElement("div",{className:"post-listing listing-default",key:this.key},r.a.createElement("div",{className:"post-date-wrap"},e),r.a.createElement("div",{className:"text-wrap"},r.a.createElement("div",{className:"title-wrap"},r.a.createElement("h4",null,r.a.createElement(s.b,{to:this.getUrl()},this.props.post.title)),r.a.createElement("p",{className:"date"},e))))}}]),a}(n.Component),je=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(){return Object(ce.a)(this,a),t.apply(this,arguments)}return Object(le.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"post-list"},this.props.posts.map((function(e){return r.a.createElement(ve,{post:e,key:e._id})})))}}]),a}(n.Component),ke=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={posts:[]},n}return Object(le.a)(a,[{key:"callAPI",value:function(){var e=this;fetch("".concat(fe,"/posts")).then((function(e){return e.json()})).then((function(t){e.setState({posts:t})})).catch((function(e){return e}))}},{key:"componentDidMount",value:function(){this.callAPI()}},{key:"render",value:function(){var e=this.state.posts;return r.a.createElement("div",{className:"post-index-page"},r.a.createElement("div",{className:"post-list-wrap"},r.a.createElement(je,{posts:e})))}}]),a}(n.Component),Oe=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){return Object(ce.a)(this,a),t.call(this,e)}return Object(le.a)(a,[{key:"render",value:function(){var e=(new Ee.AllHtmlEntities).decode(this.props.block.body);return r.a.createElement("div",{className:"block-listing",key:this.key},r.a.createElement("div",{className:"text"},de()(e)))}}]),a}(n.Component),ge=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(){return Object(ce.a)(this,a),t.apply(this,arguments)}return Object(le.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"block-list"},this.props.blocks.map((function(e){return r.a.createElement(Oe,{block:e,key:e._id})})))}}]),a}(n.Component),we=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={post:null},n}return Object(le.a)(a,[{key:"callAPI",value:function(){var e=this;fetch("".concat(fe,"/posts/").concat(this.props.match.params.slug)).then((function(e){return e.json()})).then((function(t){return e.setState({post:t})})).catch((function(e){return e}))}},{key:"componentDidMount",value:function(){this.callAPI()}},{key:"render",value:function(){if(this.state.post){var e=Object(pe.a)(he()(this.state.post.pub_date),"MMMM d, y"),t=(new Ee.AllHtmlEntities).decode(this.state.post.intro);return r.a.createElement("section",{className:"blog-post"},r.a.createElement("div",{className:"post-wrap"},r.a.createElement("div",{className:"post-date-wrap"},r.a.createElement("div",{className:"date"},e)),r.a.createElement("div",{className:"post-content-wrap"},r.a.createElement("div",{className:"post-title title-wrap"},r.a.createElement("h3",{className:"fontSize-m"},this.state.post.title),r.a.createElement("div",{className:"date"},e)),r.a.createElement("div",{className:"intro-wrap"},r.a.createElement("div",{className:"text"},de()(t))),r.a.createElement(ge,{blocks:this.state.post.blocks}))))}return r.a.createElement("section",{className:"blog-post"})}}]),a}(n.Component);function ye(){return r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/admin",component:re}))}function _e(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/log/:slug",component:we}),r.a.createElement(o.b,{path:"/log"},r.a.createElement(ke,null)),r.a.createElement(o.b,{path:"/"},r.a.createElement(Pe,null))))}function Ne(){return r.a.createElement("header",{className:"main-header structural"},r.a.createElement("div",{className:"header-title"},r.a.createElement("h3",null,r.a.createElement(s.b,{to:"/"},"Luke Cossey"),r.a.createElement(s.b,{to:"/log"},"Log"))))}function Pe(){return r.a.createElement("div",{className:"home-wrap"},r.a.createElement("p",null,"Software Engineer"),r.a.createElement("p",null,"\xa0"),r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/cosseyluke",target:"_blank"},"GitHub"),r.a.createElement("br",null),r.a.createElement("a",{href:"https://www.linkedin.com/in/luke-cossey/",target:"_blank"},"LinkedIn")))}var Ie=function(){return r.a.createElement(s.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/admin",component:ye}),r.a.createElement(o.b,{path:"/",component:_e})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[384,1,2]]]);
//# sourceMappingURL=main.1b228b4b.chunk.js.map